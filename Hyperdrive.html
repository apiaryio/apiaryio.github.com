<!doctype html>
<html prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="utf-8">

  <title>Hyperdrive &mdash; Apiary Blog</title>

  <meta name="viewport" content="width=device-width, minimum-scale=1.0">
  <meta name="author" content="Apiary">
  <link rel="alternate" type="application/rss+xml" title="The Apiary Blog Feed" href="https://blog.apiary.io/feed.xml" />

  <meta name="application-name" content="Apiary">
  <meta name="twitter:card" content="summary">
  <meta property="og:type"  content="article">
  <meta name="twitter:site" content="@apiaryio">
  <meta name="twitter:creator" content="@apiaryio">

  <meta name="twitter:title" content="Hyperdrive &mdash; Apiary Blog">
  <meta name="twitter:image" content="https://blog.apiary.io/images/apiary-logotype-3D-only.png">

  <meta property="og:title" content="Hyperdrive &mdash; Apiary Blog">
  <meta property="og:image" content="https://blog.apiary.io/images/apiary-logotype-3D-only.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

  
    <meta property="og:url" content="https://blog.apiary.io/Hyperdrive">
    <meta name="description" content="A generic API Blueprint client in Swift &mdash; Apiary Blog">
    <meta name="twitter:description" content="A generic API Blueprint client in Swift &mdash; Apiary Blog">
    <meta property="og:description" content="A generic API Blueprint client in Swift &mdash; Apiary Blog">
  

  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="canonical" href="https://blog.apiary.io/Hyperdrive">

  <!-- Styles -->
  <link rel="stylesheet" href="https://static.apiary.io/assets/styles/fonts.css">
  <link rel="stylesheet" href="https://static.apiary.io/assets/styles/modules/footer/footer.css">
  <link rel="stylesheet" href="https://static.apiary.io/assets/styles/modules/website.css">
  <link rel="stylesheet" href="/syntax.css">
  <!-- /Styles -->

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-18252923-10', 'auto');
  ga('send', 'pageview');
</script>


</head>
<body class="website">

<!-- website-header -->
  <header id="websiteHeader"><div class="positioning">
    <a class="headerLogotypeLink" href="https://apiary.io"><h1 class="visuallyhidden" title="Apiary Ltd.">Apiary</h1><div class="headerLogotype"></div></a>
    <a class="to_nav" href="#navigation"><span class="visuallyhidden">Go to Navigation</span></a>
  </div></header>
<!-- /website-header -->

<!-- website-navigation -->
  <div id="navigation">
    <nav class="websiteNav positioning">
      <ul class="clearAfter websiteNavMenu">
        
        <li class="websiteNavItem"><a class="websiteNavLink" href="https://apiary.io/how-it-works">How It Works</a></li>
        
        <li class="websiteNavItem"><a class="websiteNavLink" href="https://apiary.io/plans">Plans</a></li>
        
        <li class="websiteNavItem"><a class="websiteNavLink" href="https://apiary.io/products">Product</a></li>
        
        <li class="websiteNavItem"><a class="websiteNavLink" href="https://help.apiary.io/">Help</a></li>
        
        <li class="websiteNavItem"><a class="websiteNavLink" href="https://apiary.io/company">Company</a></li>
        
        <li class="websiteNavItem"><a class="websiteNavLink" href="https://login.apiary.io/login">Sign In</a></li>
        
        <li class="websiteNavItem"><a class="websiteNavLink websiteNavLinkHighlighted signIn" href="https://login.apiary.io/register">Sign Up</a></li>
      </ul>
      <a class="websiteNavLink backToTop" href="javascript:;"><span class="visuallyhidden">Back to top</span></a>
    </nav>
  </div>
<!-- /website-navigation -->

<div>
  <div class="blog">
  
  <div class="blogArticle">
    <a href="/" class="backToArticles">Back to Articles</a>
    <h1>Hyperdrive</h1>
    
      <p><span class="minority">By</span> <strong>Kyle</strong>
        (<a href="https://twitter.com/@kylefuller">@kylefuller</a>, <a href="mailto:kyle.fuller@oracle.com">kyle.fuller@oracle.com</a>) <span class="minority">on</span>&nbsp;04&nbsp;Jun&nbsp;2015
      </p>
    

  <p>It’s extremely common to build API clients which are tightly coupled to
implementation detail. If you look at most API clients you will
often find hard-coded details about how an API works such as the HTTP
methods to use, URIs and information about content types. We design our
clients and APIs around out-of-band specifications which overly couple
our clients to our server.</p>

<h2 id="why-is-this-a-problem">Why is this a problem?</h2>

<p>This type of client design is rarely seen as a problem, it usually isn’t
a problem immediately and only becomes a problem when you want to
change how the API works. Since clients are normally tightly coupled
to implementation details of an API. This often means you have to be
extremely careful when it comes to changing your API. You will often decide
against making certain changes because it will often break a client and
you’d rather stick to how it works. This problem is easily avoided if we
don’t duplicate how our implementation works many times in each client.</p>

<p>We often design our APIs by exposing implementation details, for example
we use IDs in our URIs and expect our clients to know how to construct
these URIs by knowing about our internal database ID.</p>

<h2 id="api-evolvability">API Evolvability</h2>

<p>You can’t have evolvability if clients have their controls hard-coded into
their design at deployment. Controls have to be learned on the fly to
allow both the server and the client change independently over time.</p>

<p>Imagine entering an API without knowing about any implementation details,
but instead just understanding the semantics of the API. We can get the
implementation details of the API at run-time to allow us to change them at
any point. Giving us the ability to control features of the API
without breaking our clients.</p>

<p>This means you don’t have to redeploy your client to make changes to
the implementation, and you don’t have to leave your existing users in
a broken state with a dated version of your application.</p>

<h2 id="hyperdrive">Hyperdrive</h2>

<p>We can enter an API that offers these controls at run-time.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">hyperdrive</span><span class="o">.</span><span class="nf">enter</span><span class="p">(</span><span class="s">"https://polls.apiblueprint.org/"</span><span class="p">)</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>

<span class="p">}</span>
</code></pre></div></div>

<p>The above API supports specific content-types which offer run-time information
about how the API works. For APIs that don’t support this, we can instead
enter the API from our API description hosted on Apiary:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">HyperBlueprint</span><span class="o">.</span><span class="nf">enter</span><span class="p">(</span><span class="nv">apiary</span><span class="p">:</span> <span class="s">"pollsapp"</span><span class="p">)</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>

<span class="p">}</span>
</code></pre></div></div>

<p>We asyncronously get back a result, which can either be a representation
of an API resource or an error. In the case that the operation succeeded,
it exposes the transitions that we can perform to transition to another
state in our API.</p>

<p>At this given time, we are exposed a single transition. A transition with
the relation <code class="highlighter-rouge">questions</code>. Our client understands the semantic meaning
behind <code class="highlighter-rouge">questions</code>, it has an expectation that the <code class="highlighter-rouge">questions</code> transition
will provide us with a collection of questions. We can go ahead and
perform this transition:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="k">let</span> <span class="nv">questions</span> <span class="o">=</span> <span class="n">representor</span><span class="o">.</span><span class="n">transitions</span><span class="p">[</span><span class="s">"questions"</span><span class="p">]</span> <span class="p">{</span>
  <span class="n">hyperdrive</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="n">questions</span><span class="p">)</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>

  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The API may no longer offer us the transition to questions, we shouldn’t
expect a transitions to always be available. We should handle when the
transition is missing, and perhaps display an error in our client or remove
functionality from our user interface.</p>

<p>The questions resource may offer us more transitions and other related
resources. Our client understands the semantic meaning behind transitions
with the relation <code class="highlighter-rouge">create</code> and <code class="highlighter-rouge">delete</code>. It expects a <code class="highlighter-rouge">create</code> transition
allows us to create a new resource in the API, and the <code class="highlighter-rouge">delete</code> transition
to delete content from our API.</p>

<p>We can introspect the questions resource to see if it offers us any of
these transitions.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="k">let</span> <span class="nv">create</span> <span class="o">=</span> <span class="n">representor</span><span class="o">.</span><span class="n">transitions</span><span class="p">[</span><span class="s">"create"</span><span class="p">]</span> <span class="p">{</span>
  <span class="c1">// We've been offered the transition to create a new question</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="c1">// Either the API no longer supports creation or our user</span>
  <span class="c1">// doesn't have this feature.</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Using introspection we can determine ahead of time if our API allows us
to create new questions and we can add or remove this from our user interface.</p>

<p>In this case, the API offered us a transition to create. The create
transition also includes any attributes we may send to perform
the create transition. Let’s introspect these and take a look:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">println</span><span class="p">(</span><span class="n">create</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="s">"question"</span><span class="p">,</span> <span class="s">"choices"</span><span class="p">]</span>
</code></pre></div></div>

<p>We’ve discovered that the API offers us two attributes we may send. We
can use these attributes to create our user interface, if an attribute was
removed from the API we can remove it from our interface without having to
change any lines of code, and without having to redeploy our application.</p>

<p>These attributes can also contain validation information, so we can perform
client-side validation in our interface.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">create</span><span class="o">.</span><span class="nf">validate</span><span class="p">(</span><span class="nv">attributes</span><span class="p">:</span> <span class="p">[</span>
  <span class="s">"question"</span><span class="p">:</span> <span class="s">"Favourite programming language?"</span><span class="p">,</span>
  <span class="s">"choices"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s">"Swift"</span><span class="p">,</span>
    <span class="s">"Python"</span><span class="p">,</span>
    <span class="s">"Ruby"</span><span class="p">,</span>
  <span class="p">]</span>
<span class="p">])</span>
</code></pre></div></div>

<p>This allows us to change validation rules at run-time, perhaps we want
to introduce a 150 character limit on our question. We don’t need to
redeploy our client to know about these changes.</p>

<p>Once we’re ready to perform this transition, we can go ahead and perform
it without knowing any implementation details such as the HTTP method, URI
or even the content type we should use.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">hyperdrive</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="n">create</span><span class="p">,</span> <span class="nv">attributes</span><span class="p">:</span> <span class="p">[</span>
  <span class="s">"question"</span><span class="p">:</span> <span class="s">"Favourite programming language?"</span><span class="p">,</span>
  <span class="s">"choices"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s">"Swift"</span><span class="p">,</span>
    <span class="s">"Python"</span><span class="p">,</span>
    <span class="s">"Ruby"</span><span class="p">,</span>
  <span class="p">]</span>
<span class="p">])</span>
</code></pre></div></div>

<p>This transition again asyncronously offers us a representation of the new
resource if the operation succeeded. This new resource shows us how we
can transition from their onwards. Our new transition allows us to delete
the newly create question:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">println</span><span class="p">(</span><span class="n">representor</span><span class="o">.</span><span class="n">transitions</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="s">"delete"</span><span class="p">]</span>
</code></pre></div></div>

<p>The transition also offers us the attributes such as the question:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">println</span><span class="p">(</span><span class="n">representor</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">"question"</span><span class="p">])</span>
<span class="o">=&gt;</span> <span class="s">"Favourite programming language?"</span>
</code></pre></div></div>

<p>We’ve also been exposed a collection of embedded resource representations,
our question is made up of three choices and we have three independant
embedded resources representations. Which have attributes and transitions
of their own. Let’s take a look:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="k">let</span> <span class="nv">choices</span> <span class="o">=</span> <span class="n">representor</span><span class="o">.</span><span class="n">representors</span><span class="p">[</span><span class="s">"choices"</span><span class="p">]</span> <span class="p">{</span>
  <span class="k">for</span> <span class="n">choice</span> <span class="k">in</span> <span class="n">choices</span> <span class="p">{</span>
    <span class="nf">println</span><span class="p">(</span><span class="n">choice</span><span class="o">.</span><span class="n">attributes</span><span class="p">)</span>
    <span class="nf">println</span><span class="p">(</span><span class="n">choice</span><span class="o">.</span><span class="n">transitions</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Each embedded choice representation may offers us a transition to go
and vote on that choice:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="k">let</span> <span class="nv">vote</span> <span class="o">=</span> <span class="n">choice</span><span class="o">.</span><span class="n">transitions</span><span class="p">[</span><span class="s">"vote"</span><span class="p">]</span> <span class="p">{</span>
  <span class="n">hyperdrive</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="n">vote</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<p>Hyperdrive is our new generic Hypermedia API Client in Swift. It’s
open-source and available today on <a href="https://github.com/the-hypermedia-project/Hyperdrive">GitHub</a>.</p>

<p><img src="/images/Hyperdrive.png" alt="Hyperdrive" /></p>

<p>In comparison to traditional API clients, we can avoid duplicating logic
from our API and embrace change by using Hyperdrive. We no longer have to
redeploy our API clients to make small changes to the servers implementation.</p>



  </div>
</div>


</div>

<!-- website-footer -->
  <hr>

<footer class="applicationFooter">

  <div class="applicationFooterRow">
    <div class="applicationFooterColumns">
    <div class="applicationFooterColumn">
    </div><div class="applicationFooterColumn">
      <h3 class="applicationFooterTitle">Platform</h3>
      <ul class="applicationFooterList">
        <li><a class="applicationFooterListLink" href="https://apiary.io/how-it-works">How It Works</a></li>
        <li><a class="applicationFooterListLink" href="https://apiary.io/products">Product</a></li>
        <li><a class="applicationFooterListLink" href="https://apiary.io/plans">Plans</a></li>
        <li><a class="applicationFooterListLink" href="https://help.apiary.io">Help</a></li>
      </ul>
    </div><div class="applicationFooterColumn">
      <h3 class="applicationFooterTitle">Company</h3>
      <ul class="applicationFooterList">
        <li><a class="applicationFooterListLink" href="https://blog.apiary.io/">Blog</a></li>
        <li><a class="applicationFooterListLink" href="https://apiary.io/company">Team</a></li>
        <li><a class="applicationFooterListLink" href="https://apiary.io/jobs">Jobs</a></li>
        <li><a class="applicationFooterListLink" href="https://apiary.io/oracle">Oracle</a></li>
      </ul>
    </div><div class="applicationFooterColumn">
      <h3 class="applicationFooterTitle">Open Source</h3>
      <ul class="applicationFooterList">
        <li><a class="applicationFooterListLink" href="https://apiblueprint.org">API Blueprint</a></li>
        <li><a class="applicationFooterListLink" href="https://github.com/apiaryio/gavel">Gavel</a></li>
        <li><a class="applicationFooterListLink" href="https://github.com/apiaryio/dredd">Dredd</a></li>
        <li><a class="applicationFooterListLink" href="https://help.apiary.io/tools/apiary-cli/">Apiary CLI</a></li>
      </ul>
    </div><div class="applicationFooterColumn">
      <h3 class="applicationFooterTitle">Social</h3>
      <ul class="applicationFooterList">
        <li><a class="applicationFooterListLink" href="https://github.com/apiaryio">GitHub</a></li>
        <li><a class="applicationFooterListLink" href="https://twitter.com/apiaryio">Twitter</a></li>
      </ul>
    </div></div>
  </div>

  <div class="applicationFooterRow">
    <p class="applicationFooterCopyright">Copyright &copy; 2019, Oracle and/or its affiliates. All rights reserved. Oracle and Java are registered trademarks of Oracle and/or its affiliates. Other names may be trademarks of their respective owners.
      <span class="applicationFooterCopyrightLinks"><a href="https://apiary.io/tos" class="applicationFooterCopyrightLink">Terms</a> • <a href="https://apiary.io/privacy" class="applicationFooterCopyrightLink">Privacy</a> • <span id="teconsent"></span></span>
    </p>
  </div>
</footer>
<!-- /website-footer -->

<script src="https://static.apiary.io/assets/js/website-scroll.js"></script>
<script>
  websiteScroll();
  document.documentElement.className += ' js';
</script>
<script src="https://consent.trustarc.com/notice?domain=apiary.io&amp;c=teconsent&amp;text=true&amp;js=nj&amp;noticeType=bb" async="async" crossorigin=""></script>

</body>
</html>
